(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{14:function(e,t,n){"use strict";var i=n(0),u=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.pos=t.Pos=void 0;var r=function(){function e(t,n){i(this,e),this.x=t,this.y=n}return u(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}}]),e}();t.Pos=r,t.pos=function(e,t){return new r(e,t)}},15:function(e,t,n){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.dim=t.Dim=void 0;var u=function e(t,n){i(this,e),this.w=t,this.h=n};t.Dim=u,t.dim=function(e,t){return new u(e,t)}},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gotItemBox=t.childMsg=t.gotKeyDown=t.gotMenuBox=t.gotUuid=t.gotWindowDimensions=void 0,t.gotWindowDimensions=function(e){return{tag:"got-window-dimensions",d:e}},t.gotUuid=function(e){return{tag:"got-uuid",uuid:e}},t.gotMenuBox=function(e){return{tag:"got-menu-box",r:e}},t.gotKeyDown=function(e){return{tag:"key-down",key:e}},t.childMsg=function(e){return{tag:"child-msg",m:e}},t.gotItemBox=function(e,t){return{tag:"got-item-box",item:e,r:t}}},21:function(e,t,n){"use strict";var i=n(0),u=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.menuItemTask=t.menuTask=t.menuItemId=t.menuId=t.separator=t.item=t.menu=t.Menu=void 0;var r=n(2),o=function(){function e(t){i(this,e),this.elements=t}return u(e,[{key:"selectItem",value:function(t){return new e(this.elements.select((function(e){return e===t})))}},{key:"isSelected",value:function(e){return this.elements.isSelected(e)}},{key:"findNextItemIndex",value:function(e){for(var t=this.elems,n=e===t.length-1?0:e+1;n<t.length;n++)if("item"===t[n].tag)return r.just(n);return r.nothing}},{key:"findPreviousItemIndex",value:function(e){for(var t=this.elems,n=0===e?t.length-1:e-1;n>=0;n--)if("item"===t[n].tag)return r.just(n);return r.nothing}},{key:"moveSelection",value:function(t){var n=this;return this.elements.getSelectedIndex().map((function(i){return(t?n.findNextItemIndex(i):n.findPreviousItemIndex(i)).map((function(t){return new e(n.elements.selectIndex(t))})).withDefault(n)})).withDefaultSupply((function(){return new e(n.elements.selectIndex(t?0:n.elements.length()-1))}))}},{key:"indexOfItem",value:function(e){var t=this.elements.toArray().indexOf(e);return-1===t?r.nothing:r.just(t)}},{key:"elems",get:function(){return this.elements.toArray()}},{key:"selectedItem",get:function(){var e=this.elements.getSelected();return"Just"===e.type&&"item"===e.value.tag?r.just(e.value):r.nothing}}]),e}();function a(e){return"tm-".concat(btoa(e))}function c(e,t){return"tm-item-".concat(e,"-").concat(t)}function s(e){return r.Task.fromLambda((function(){var t=document.getElementById(e);if(null===t)throw new Error("element not found with id:"+e);return t}))}t.Menu=o,t.menu=function(e){return new o(r.ListWithSelection.fromArray(e))},t.item=function(e,t){return{tag:"item",userData:e,subMenu:r.maybeOf(t)}},t.separator={tag:"separator"},t.menuId=a,t.menuItemId=c,t.menuTask=function(e){return s(a(e))},t.menuItemTask=function(e,t){return s(c(e,t))}},3:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),u=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),u(n(31),t),u(n(20),t),u(n(21),t),u(n(70),t),u(n(72),t),u(n(73),t),u(n(33),t),u(n(14),t),u(n(15),t),u(n(74),t)},31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyboardNavigated=t.menuStatePlacing=t.initialModel=void 0;var i=n(2);function u(e){return{tag:"placing",position:e}}t.initialModel=function(e,t){return{uuid:i.nothing,windowSize:i.nothing,menu:e,state:u(t),error:i.nothing,child:i.nothing,navigatedWithKeyboard:!1}},t.menuStatePlacing=u,t.keyboardNavigated=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(Object.assign({},e),{navigatedWithKeyboard:t})}},32:function(e,t,n){"use strict";var i=n(0),u=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.box=t.Box=void 0;var r=n(14),o=n(15),a=function(){function e(t,n){i(this,e),this.p=t,this.d=n}return u(e,null,[{key:"fromDomRect",value:function(e){var t=e.x,n=e.y,i=e.height,u=e.width;return c(r.pos(t,n),o.dim(u,i))}}]),e}();function c(e,t){return new a(e,t)}t.Box=a,t.box=c},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopEvent=void 0,t.stopEvent=function(e){e.preventDefault(),e.stopPropagation()}},35:function(e,t,n){e.exports=n(75)},40:function(e,t,n){},41:function(e,t,n){},70:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptions=t.update=t.open=void 0;var i=n(20),u=n(2),r=n(31),o=n(21),a=n(14),c=n(15),s=n(32),m=n(71);function d(e,t){return[r.initialModel(e,t),u.Cmd.batch([u.Task.perform(v,(function(e){return i.gotWindowDimensions(e)})),u.Task.perform(u.uuid(),(function(e){return i.gotUuid(e)}))])]}function l(e){return"Nothing"===e.uuid.type||"Nothing"===e.windowSize.type?u.noCmd(e):[e,u.Task.attempt(o.menuTask(e.uuid.value).map((function(e){return s.Box.fromDomRect(e.getBoundingClientRect())})),(function(e){return i.gotMenuBox(e)}))]}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.nothing;return[e[0],e[1],t]}function g(e,t,n){return t.subMenu.isNothing()?u.Cmd.none():u.Task.attempt(o.menuItemTask(e,n).map((function(e){return s.Box.fromDomRect(e.getBoundingClientRect())})),(function(e){return i.gotItemBox(t,e)}))}t.open=d,t.update=function e(t,n){switch(console.log("update",t),t.tag){case"got-window-dimensions":return f(l(Object.assign(Object.assign({},n),{windowSize:u.just(t.d)})));case"got-uuid":return f(l(Object.assign(Object.assign({},n),{uuid:u.just(t.uuid)})));case"got-menu-box":return f(u.noCmd(n.windowSize.map((function(e){return t.r.match((function(t){return Object.assign(Object.assign({},n),{state:{tag:"open",box:m.adjustPopover(e,t)}})}),(function(e){return Object.assign(Object.assign({},n),{error:u.just(e)})}))})).withDefault(n)));case"key-down":switch(t.key){case"Escape":return f(w(r.keyboardNavigated(n)),n.child.isNothing()?u.just({tag:"request-close"}):u.nothing);case"ArrowDown":case"ArrowUp":return f(b(r.keyboardNavigated(n),(function(e){return u.noCmd(Object.assign(Object.assign({},e),{menu:e.menu.moveSelection("ArrowDown"===t.key)}))})));case"ArrowLeft":return f(w(r.keyboardNavigated(n)));case"ArrowRight":return f(function(e){return b(e,(function(e){return e.menu.selectedItem.map((function(t){return t.subMenu.map((function(){if(console.log("selected item has sub menu..."),"Nothing"===e.uuid.type)return u.noCmd(e);var n=e.uuid.value,i=e.menu.indexOfItem(t).map((function(e){return console.log("opening item #"+e+" ("+t.userData+")"),g(n,t,e)})).withDefaultSupply((function(){return u.Cmd.none()}));return u.Tuple.t2n(e,i)})).withDefaultSupply((function(){return console.log("selected item has no sub menu"),u.noCmd(e)}))})).withDefaultSupply((function(){return console.log("no selected item in last model"),u.noCmd(e)}))}))}(r.keyboardNavigated(n)));case"Enter":case" ":return n.menu.selectedItem.map((function(e){return f(u.noCmd(n),u.just({tag:"item-selected",data:e.userData}))})).withDefaultSupply((function(){return f(u.noCmd(n))}));default:return f(u.noCmd(n))}case"mouse-move":if(n.navigatedWithKeyboard)return f(u.noCmd(r.keyboardNavigated(n,!1)));if("Nothing"===n.uuid.type)return f(u.noCmd(n));if(n.menu.isSelected(t.item))return f(u.noCmd(n));console.log("mouseEnter",n);var o=n.menu.selectItem(t.item),c=n.uuid.value;return f(u.Tuple.t2n(Object.assign(Object.assign({},n),{menu:o,child:u.nothing}),g(c,t.item,t.itemIndex)));case"got-item-box":return f(t.r.match((function(e){var r=Object.assign(Object.assign({},n),{menu:n.menu.selectItem(t.item)});return t.item.subMenu.map((function(t){var n=d(t,e.p.add(a.pos(e.d.w,0))),o=Object.assign(Object.assign({},r),{child:u.just(n[0])});return u.Tuple.t2n(o,n[1].map(i.childMsg))})).withDefaultSupply((function(){return r.child.map((function(){return u.noCmd(Object.assign(Object.assign({},n),{child:u.nothing}))})).withDefaultSupply((function(){return u.noCmd(n)}))}))}),(function(e){return u.noCmd(Object.assign(Object.assign({},n),{error:u.just(e)}))})));case"child-msg":return n.child.map((function(r){var o=e(t.m,r),a=Object.assign(Object.assign({},n),{child:u.just(o[0])});return f(u.Tuple.t2n(a,o[1].map(i.childMsg)),o[2])})).withDefaultSupply((function(){return f(u.noCmd(n))}));case"item-clicked":return f(u.noCmd(n),u.just({tag:"item-selected",data:t.item.userData}))}};var p=new u.WindowEvents,h=new u.WindowEvents;t.subscriptions=function(e){return u.Sub.batch([p.on("resize",(function(){return i.gotWindowDimensions(c.dim(window.innerWidth,window.innerHeight))})),"open"===e.state.tag?h.on("keydown",(function(e){return i.gotKeyDown(e.key)})):u.Sub.none()])};var v=u.Task.succeedLazy((function(){return c.dim(window.innerWidth,window.innerHeight)}));function b(e,t){switch(e.child.type){case"Nothing":return t(e);case"Just":var n=b(e.child.value,t);return[Object.assign(Object.assign({},e),{child:u.just(n[0])}),n[1].map(i.childMsg)]}}function w(e){switch(e.child.type){case"Nothing":return u.noCmd(e);case"Just":var t=e.child.value;return t.child.isJust()?u.Tuple.fromNative(w(t)).mapFirst((function(t){return Object.assign(Object.assign({},e),{child:u.just(t)})})).mapSecond((function(e){return e.map(i.childMsg)})).toNative():u.noCmd(Object.assign(Object.assign({},e),{child:u.nothing}))}}},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustPopover=void 0;var i=n(32),u=n(15),r=n(14);t.adjustPopover=function(e,t){var n=t.p,o=n.x,a=n.y,c=t.d,s=c.h,m=c.w,d=e.h,l=e.w,f=a,g=s,p=a+s-d;p>0&&(a>p?f=a-p:(f=0,g=d));var h=o,v=m,b=o+m-l;return b>0&&(o>b?h=o-b:(h=0,v=l)),i.box(r.pos(h,f),u.dim(v,g))}},72:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return u(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewMenuItem=t.ViewMenu=void 0;var o=r(n(4)),a=n(21),c=n(20),s=n(2),m=n(33);function d(e){var t=e.menu,n=e.item,i=e.renderer,u=e.dispatch,r=e.uuid,c=e.itemIndex,s=t.isSelected(n)?" tm-selected":"";return o.createElement("div",{id:a.menuItemId(r,c),className:"tm--item"+s,onMouseMove:function(){return u({tag:"mouse-move",item:n,itemIndex:c})},onClick:function(){return u({tag:"item-clicked",item:n})}},o.createElement("div",{className:"tm--item__content"},i(n.userData)),n.subMenu.map((function(e){return o.createElement("div",{className:"tm--item__submenu-trigger"},"\u203a")})).withDefaultSupply((function(){return o.createElement(o.Fragment,null)})))}t.ViewMenu=function e(t){var n=t.model,i=t.dispatch,u=t.renderer,r=n.menu,l=n.state,f=n.uuid,g=n.windowSize;if("Nothing"===f.type)return o.createElement(o.Fragment,null);if("Nothing"===g.type)return o.createElement(o.Fragment,null);var p=function(){return r.elems.map((function(e,n){switch(e.tag){case"item":return o.createElement(d,Object.assign({key:"item-".concat(n),uuid:f.value,itemIndex:n,menu:r,item:e},t));case"separator":return o.createElement("div",{key:"sep-".concat(n),className:"tm--separator"})}}))};switch(l.tag){case"placing":var h=l.position;return o.createElement("div",{className:"tm-placer",style:{position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"hidden"},onContextMenu:m.stopEvent},o.createElement("div",{className:"tm",id:a.menuId(f.value),style:{position:"absolute",top:h.y,left:h.x,visibility:"hidden"},onContextMenu:m.stopEvent},p()));case"open":var v=l.box,b=v.p,w=v.d;return o.createElement(o.Fragment,null,o.createElement("div",{className:"tm",id:a.menuId(f.value),style:{position:"absolute",top:b.y,left:b.x,width:w.w,height:w.h},onContextMenu:m.stopEvent},p()),n.child.map((function(t){return o.createElement(e,{model:t,dispatch:s.map(i,c.childMsg),renderer:u})})).withDefaultSupply((function(){return o.createElement(o.Fragment,null)})))}},t.ViewMenuItem=d},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},75:function(e,t,n){"use strict";n.r(t);var i=n(4),u=n.n(i),r=n(34),o=n.n(r),a=(n(40),n(41),n(2)),c=n(8),s=n(3);function m(e){return{tag:"menu-msg",msg:e}}var d=Object(s.menu)([Object(s.item)("Try"),Object(s.item)("Finally")]),l=Object(s.menu)([Object(s.item)("Do this"),Object(s.item)("Do that"),s.separator,Object(s.item)("Another sub menu...",d)]),f=Object(s.menu)([Object(s.item)("Copy"),Object(s.item)("Cut"),Object(s.item)("Paste"),s.separator,Object(s.item)("Yalla",l),Object(s.item)("I am a bit longer")]),g=function(e){return i.createElement("span",null,e)};function p(){var e={menuModel:a.nothing,lastClicked:a.nothing};return Object(a.noCmd)(e)}function h(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"},onContextMenu:s.stopEvent,onMouseDown:function(t){e({tag:"mouse-down",button:t.button,pos:s.pos(t.pageX,t.pageY)})}},i.createElement("div",null,t.menuModel.map((function(){return"Menu is open"})).withDefaultSupply((function(){return t.lastClicked.map((function(e){return"You selected '"+e+"'"})).withDefault("Right-click anywhere")})))),t.menuModel.map((function(t){return i.createElement(s.ViewMenu,{model:t,dispatch:Object(a.map)(e,m),renderer:g})})).withDefault(i.createElement(i.Fragment,null)))}function v(e,t){switch(e.tag){case"menu-msg":if("Nothing"===t.menuModel.type)return Object(a.noCmd)(t);var n=t.menuModel.value,i=s.update(e.msg,n),u=[Object(c.a)(Object(c.a)({},t),{},{menuModel:Object(a.just)(i[0])}),i[1].map(m)];return i[2].map((function(e){switch(e.tag){case"request-close":return b(t);case"item-selected":return b(t,Object(a.just)(e.data))}})).withDefault(u);case"mouse-down":return 2===e.button?function(e,t){return a.Tuple.fromNative(t).mapFirst((function(t){return Object(c.a)(Object(c.a)({},e),{},{menuModel:Object(a.just)(t)})})).mapSecond((function(e){return e.map(m)})).toNative()}(t,s.open(f,e.pos)):Object(a.noCmd)(Object(c.a)(Object(c.a)({},t),{},{menuModel:a.nothing,lastClicked:a.nothing}))}}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.nothing;return Object(a.noCmd)(Object(c.a)(Object(c.a)({},e),{},{menuModel:a.nothing,lastClicked:t}))}function w(e){return e.menuModel.map((function(e){return s.subscriptions(e).map(m)})).withDefaultSupply((function(){return a.Sub.none()}))}var j=function(){return u.a.createElement(a.Program,{init:p,view:h,update:v,subscriptions:w,devTools:a.DevTools.init(window)})};o.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(j,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.57cf1444.chunk.js.map