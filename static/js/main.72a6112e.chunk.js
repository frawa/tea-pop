(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{14:function(e,t,n){"use strict";var u=n(0),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.pos=t.Pos=void 0;var r=function(){function e(t,n){u(this,e),this.x=t,this.y=n}return i(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}}]),e}();function o(e,t){return new r(e,t)}t.Pos=r,r.origin=o(0,0),t.pos=o},15:function(e,t,n){"use strict";var u=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.dim=t.Dim=void 0;var i=function e(t,n){u(this,e),this.w=t,this.h=n};t.Dim=i,t.dim=function(e,t){return new i(e,t)}},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.docMouseDown=t.gotItemBox=t.childMsg=t.gotKeyDown=t.gotMenuBox=t.gotUuid=t.gotWindowDimensions=t.noop=void 0,t.noop=function(){return{tag:"noop"}},t.gotWindowDimensions=function(e){return{tag:"got-window-dimensions",d:e}},t.gotUuid=function(e){return{tag:"got-uuid",uuid:e}},t.gotMenuBox=function(e){return{tag:"got-menu-box",r:e}},t.gotKeyDown=function(e){return{tag:"key-down",key:e}},t.childMsg=function(e){return{tag:"child-msg",m:e}},t.gotItemBox=function(e,t){return{tag:"got-item-box",item:e,r:t}},t.docMouseDown=function(){return{tag:"doc-mouse-down"}}},21:function(e,t,n){"use strict";var u=n(0),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.menuItemTask=t.menuTask=t.menuItemId=t.menuId=t.separator=t.item=t.menu=t.Menu=void 0;var r=n(3),o=function(){function e(t){u(this,e),this.elements=t}return i(e,[{key:"selectFirstItem",value:function(){return new e(this.elements.selectIndex(0))}},{key:"selectItem",value:function(t){return new e(this.elements.select((function(e){return e===t})))}},{key:"isSelected",value:function(e){return this.elements.isSelected(e)}},{key:"findNextItemIndex",value:function(e){for(var t=this.elems,n=e===t.length-1?0:e+1;n<t.length;n++)if("item"===t[n].tag)return r.just(n);return r.nothing}},{key:"findPreviousItemIndex",value:function(e){for(var t=this.elems,n=0===e?t.length-1:e-1;n>=0;n--)if("item"===t[n].tag)return r.just(n);return r.nothing}},{key:"moveSelection",value:function(t){var n=this;return this.elements.getSelectedIndex().map((function(u){return(t?n.findNextItemIndex(u):n.findPreviousItemIndex(u)).map((function(t){return new e(n.elements.selectIndex(t))})).withDefault(n)})).withDefaultSupply((function(){return new e(n.elements.selectIndex(t?0:n.elements.length()-1))}))}},{key:"indexOfItem",value:function(e){var t=this.elements.toArray().indexOf(e);return-1===t?r.nothing:r.just(t)}},{key:"elems",get:function(){return this.elements.toArray()}},{key:"selectedItem",get:function(){var e=this.elements.getSelected();return"Just"===e.type&&"item"===e.value.tag?r.just(e.value):r.nothing}}]),e}();function a(e){return"tm-".concat(btoa(e))}function c(e,t){return"tm-item-".concat(e,"-").concat(t)}function s(e){return r.Task.fromLambda((function(){var t=document.getElementById(e);if(null===t)throw new Error("element not found with id:"+e);return t}))}t.Menu=o,t.menu=function(e){return new o(r.ListWithSelection.fromArray(e))},t.item=function(e,t){return{tag:"item",userData:e,subMenu:r.maybeOf(t)}},t.separator={tag:"separator"},t.menuId=a,t.menuItemId=c,t.menuTask=function(e){return s(a(e))},t.menuItemTask=function(e,t){return s(c(e,t))}},31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyboardNavigated=t.menuStatePlacing=t.initialModel=void 0;var u=n(3);function i(e){return{tag:"placing",position:e}}t.initialModel=function(e,t){return{uuid:u.nothing,windowSize:u.nothing,menu:e,state:i(t),error:u.nothing,child:u.nothing,navigatedWithKeyboard:!1}},t.menuStatePlacing=i,t.keyboardNavigated=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(Object.assign({},e),{navigatedWithKeyboard:t})}},32:function(e,t,n){"use strict";var u=n(0),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.box=t.Box=void 0;var r=n(14),o=n(15),a=function(){function e(t,n){u(this,e),this.p=t,this.d=n}return i(e,null,[{key:"fromDomRect",value:function(e){var t=e.x,n=e.y,u=e.height,i=e.width;return c(r.pos(t,n),o.dim(i,u))}}]),e}();function c(e,t){return new a(e,t)}t.Box=a,t.box=c},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopEvent=void 0,t.stopEvent=function(e){e.preventDefault(),e.stopPropagation()}},35:function(e,t,n){e.exports=n(75)},4:function(e,t,n){"use strict";var u=this&&this.__createBinding||(Object.create?function(e,t,n,u){void 0===u&&(u=n),Object.defineProperty(e,u,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,u){void 0===u&&(u=n),e[u]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||u(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(31),t),i(n(20),t),i(n(21),t),i(n(70),t),i(n(72),t),i(n(73),t),i(n(33),t),i(n(14),t),i(n(15),t),i(n(74),t)},40:function(e,t,n){},41:function(e,t,n){},70:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptions=t.update=t.open=void 0;var u=n(20),i=n(3),r=n(31),o=n(21),a=n(14),c=n(15),s=n(32),m=n(71);function d(e,t){return[r.initialModel(e.selectFirstItem(),t),i.Cmd.batch([i.Task.perform(b,(function(e){return u.gotWindowDimensions(e)})),i.Task.perform(i.uuid(),(function(e){return u.gotUuid(e)}))])]}function l(e){return"Nothing"===e.uuid.type||"Nothing"===e.windowSize.type?i.noCmd(e):[e,i.Task.attempt(o.menuTask(e.uuid.value).map((function(e){return s.Box.fromDomRect(e.getBoundingClientRect())})),(function(e){return u.gotMenuBox(e)}))]}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.nothing;return[e[0],e[1],t]}function p(e){return i.just({tag:"item-selected",data:e.userData})}function g(e,t,n){return t.subMenu.isNothing()?i.Cmd.none():i.Task.attempt(o.menuItemTask(e,n).map((function(e){return s.Box.fromDomRect(e.getBoundingClientRect())})),(function(e){return u.gotItemBox(t,e)}))}t.open=d,t.update=function e(t,n){switch(t.tag){case"got-window-dimensions":return f(l(Object.assign(Object.assign({},n),{windowSize:i.just(t.d)})));case"got-uuid":return f(l(Object.assign(Object.assign({},n),{uuid:i.just(t.uuid)})));case"got-menu-box":return f(i.noCmd(n.windowSize.map((function(e){return t.r.match((function(t){return Object.assign(Object.assign({},n),{state:{tag:"open",box:m.adjustPopover(e,t)}})}),(function(e){return Object.assign(Object.assign({},n),{error:i.just(e)})}))})).withDefault(n)));case"key-down":switch(t.key){case"Escape":return f(j(r.keyboardNavigated(n)),n.child.isNothing()?i.just({tag:"request-close"}):i.nothing);case"ArrowDown":case"ArrowUp":return w(r.keyboardNavigated(n),(function(e){return f(i.noCmd(Object.assign(Object.assign({},e),{menu:e.menu.moveSelection("ArrowDown"===t.key)})))}));case"ArrowLeft":return f(j(r.keyboardNavigated(n)));case"ArrowRight":return function(e){return w(e,(function(e){return e.menu.selectedItem.map((function(t){return t.subMenu.map((function(){if("Nothing"===e.uuid.type)return f(i.noCmd(e));var n=e.uuid.value,u=e.menu.indexOfItem(t).map((function(e){return g(n,t,e)})).withDefaultSupply((function(){return i.Cmd.none()}));return f(i.Tuple.t2n(e,u))})).withDefaultSupply((function(){return f(i.noCmd(e))}))})).withDefaultSupply((function(){return f(i.noCmd(e))}))}))}(r.keyboardNavigated(n));case"Enter":case" ":return function(e){return w(e,(function(e){return e.menu.selectedItem.map((function(t){if("Nothing"===e.uuid.type)return f(i.noCmd(e));var n=e.uuid.value;return t.subMenu.map((function(){var u=e.menu.indexOfItem(t).map((function(e){return g(n,t,e)})).withDefaultSupply((function(){return i.Cmd.none()}));return f(i.Tuple.t2n(e,u))})).withDefaultSupply((function(){return f(i.noCmd(e),p(t))}))})).withDefaultSupply((function(){return f(i.noCmd(e))}))}))}(n);default:return f(i.noCmd(n))}case"mouse-move":if(n.navigatedWithKeyboard)return f(i.noCmd(r.keyboardNavigated(n,!1)));if("Nothing"===n.uuid.type)return f(i.noCmd(n));if(n.menu.isSelected(t.item))return f(i.noCmd(n));var o=n.menu.selectItem(t.item),c=n.uuid.value;return f(i.Tuple.t2n(Object.assign(Object.assign({},n),{menu:o,child:i.nothing}),g(c,t.item,t.itemIndex)));case"got-item-box":return f(t.r.match((function(e){var r=Object.assign(Object.assign({},n),{menu:n.menu.selectItem(t.item)});return t.item.subMenu.map((function(t){var n=d(t,e.p.add(a.pos(e.d.w,0))),o=Object.assign(Object.assign({},r),{child:i.just(n[0])});return i.Tuple.t2n(o,n[1].map(u.childMsg))})).withDefaultSupply((function(){return r.child.map((function(){return i.noCmd(Object.assign(Object.assign({},n),{child:i.nothing}))})).withDefaultSupply((function(){return i.noCmd(n)}))}))}),(function(e){return i.noCmd(Object.assign(Object.assign({},n),{error:i.just(e)}))})));case"child-msg":return n.child.map((function(r){var o=e(t.m,r),a=Object.assign(Object.assign({},n),{child:i.just(o[0])});return f(i.Tuple.t2n(a,o[1].map(u.childMsg)),o[2])})).withDefaultSupply((function(){return f(i.noCmd(n))}));case"item-clicked":return f(i.noCmd(n),p(t.item));case"doc-mouse-down":return f(i.noCmd(n),i.just({tag:"request-close"}));case"noop":return f(i.noCmd(n))}};var h=new i.WindowEvents,v=new i.DocumentEvents;t.subscriptions=function(e){return i.Sub.batch([h.on("resize",(function(){return u.gotWindowDimensions(c.dim(window.innerWidth,window.innerHeight))})),v.on("mousedown",(function(e){if(2===e.button)return u.noop();for(var t=e.target;t;){if(t.classList.contains("tm"))return u.noop();t=t.parentElement}return u.docMouseDown()})),"open"===e.state.tag?v.on("keydown",(function(e){return u.gotKeyDown(e.key)})):i.Sub.none()])};var b=i.Task.succeedLazy((function(){return c.dim(window.innerWidth,window.innerHeight)}));function w(e,t){switch(e.child.type){case"Nothing":return t(e);case"Just":var n=w(e.child.value,t);return[Object.assign(Object.assign({},e),{child:i.just(n[0])}),n[1].map(u.childMsg),n[2]]}}function j(e){switch(e.child.type){case"Nothing":return i.noCmd(e);case"Just":var t=e.child.value;return t.child.isJust()?i.Tuple.fromNative(j(t)).mapFirst((function(t){return Object.assign(Object.assign({},e),{child:i.just(t)})})).mapSecond((function(e){return e.map(u.childMsg)})).toNative():i.noCmd(Object.assign(Object.assign({},e),{child:i.nothing}))}}},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustPopover=void 0;var u=n(32),i=n(15),r=n(14);t.adjustPopover=function(e,t){var n=t.p,o=n.x,a=n.y,c=t.d,s=c.h,m=c.w,d=e.h,l=e.w,f=a,p=s,g=a+s-d;g>0&&(a>g?f=a-g:(f=0,p=d));var h=o,v=m,b=o+m-l;return b>0&&(o>b?h=o-b:(h=0,v=l)),u.box(r.pos(h,f),i.dim(v,p))}},72:function(e,t,n){"use strict";var u=this&&this.__createBinding||(Object.create?function(e,t,n,u){void 0===u&&(u=n),Object.defineProperty(e,u,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,u){void 0===u&&(u=n),e[u]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&u(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewMenuItem=t.ViewMenu=void 0;var o=r(n(2)),a=n(21),c=n(20),s=n(3),m=n(33);function d(e){var t=e.menu,n=e.item,u=e.renderer,i=e.dispatch,r=e.uuid,c=e.itemIndex,s=t.isSelected(n);return o.createElement("div",{id:a.menuItemId(r,c),onMouseMove:function(){return i({tag:"mouse-move",item:n,itemIndex:c})},onClick:function(){i({tag:"item-clicked",item:n})}},u({data:n.userData,active:s,hasSubMenu:n.subMenu.isJust()}))}t.ViewMenu=function e(t){var n=t.model,u=t.dispatch,i=t.renderer,r=n.menu,l=n.state,f=n.uuid,p=n.windowSize;if("Nothing"===f.type)return o.createElement(o.Fragment,null);if("Nothing"===p.type)return o.createElement(o.Fragment,null);var g=function(){return r.elems.map((function(e,n){switch(e.tag){case"item":return o.createElement(d,Object.assign({key:"item-".concat(n),uuid:f.value,itemIndex:n,menu:r,item:e},t));case"separator":return o.createElement("div",{key:"sep-".concat(n),className:"tm-separator"})}}))};switch(l.tag){case"placing":var h=l.position;return o.createElement("div",{className:"tm-placer",style:{position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"hidden"},onContextMenu:m.stopEvent},o.createElement("div",{className:"tm",id:a.menuId(f.value),style:{position:"absolute",top:h.y,left:h.x,visibility:"hidden"},onContextMenu:m.stopEvent},g()));case"open":var v=l.box,b=v.p,w=v.d;return o.createElement(o.Fragment,null,o.createElement("div",{className:"tm",id:a.menuId(f.value),style:{position:"absolute",top:b.y,left:b.x,width:w.w,height:w.h},onContextMenu:m.stopEvent},g()),n.child.map((function(t){return o.createElement(e,{model:t,dispatch:s.map(u,c.childMsg),renderer:i})})).withDefaultSupply((function(){return o.createElement(o.Fragment,null)})))}},t.ViewMenuItem=d},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},74:function(e,t,n){"use strict";var u=this&&this.__createBinding||(Object.create?function(e,t,n,u){void 0===u&&(u=n),Object.defineProperty(e,u,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,u){void 0===u&&(u=n),e[u]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&u(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultItemRenderer=void 0;var o=r(n(2));t.defaultItemRenderer=function(e){return function(t){var n=t.data,u=t.active,i=t.hasSubMenu,r=u?" tm-active":"";return o.createElement("div",{className:"tm-item".concat(r)},o.createElement("div",{className:"tm-item__content"},e(n)),i?o.createElement("div",{className:"tm-item__submenu"},"\u203a"):o.createElement(o.Fragment,null))}}},75:function(e,t,n){"use strict";n.r(t);var u=n(2),i=n.n(u),r=n(34),o=n.n(r),a=(n(40),n(41),n(3)),c=n(8),s=n(4);function m(e){return{tag:"menu-msg",msg:e}}var d=Object(s.menu)([Object(s.item)("Try"),Object(s.item)("Finally")]),l=Object(s.menu)([Object(s.item)("Do this"),Object(s.item)("Do that"),s.separator,Object(s.item)("Another sub menu...",d)]),f=Object(s.menu)([Object(s.item)("Copy"),Object(s.item)("Cut"),Object(s.item)("Paste"),s.separator,Object(s.item)("Yalla",l),Object(s.item)("I am a bit longer")]),p=Object(s.defaultItemRenderer)((function(e){return u.createElement("span",null,e)}));function g(){return Object(a.noCmd)({menuModel:a.nothing,lastClicked:a.nothing,mousePos:s.Pos.origin})}function h(e,t){return u.createElement(u.Fragment,null,u.createElement("div",{className:"demo",style:{},onContextMenu:s.stopEvent,onMouseDown:function(t){return e({tag:"mouse-down",button:t.button})}},t.menuModel.map((function(){return u.createElement("span",null,"Menu is open")})).withDefaultSupply((function(){return t.lastClicked.map((function(e){return u.createElement("span",null,"You selected ",u.createElement("em",null,e))})).withDefault(u.createElement("span",null,"Right-click anywhere, or use the ",u.createElement("code",null,"\u2263")," key."))}))),t.menuModel.map((function(t){return u.createElement(s.ViewMenu,{model:t,dispatch:Object(a.map)(e,m),renderer:p})})).withDefault(u.createElement(u.Fragment,null)))}function v(e,t){switch(e.tag){case"menu-msg":if("Nothing"===t.menuModel.type)return Object(a.noCmd)(t);var n=t.menuModel.value,u=s.update(e.msg,n),i=[Object(c.a)(Object(c.a)({},t),{},{menuModel:Object(a.just)(u[0])}),u[1].map(m)];return u[2].map((function(e){switch(e.tag){case"request-close":return y(t);case"item-selected":return y(t,Object(a.just)(e.data))}})).withDefault(i);case"mouse-move":return Object(a.noCmd)(Object(c.a)(Object(c.a)({},t),{},{mousePos:e.pos}));case"mouse-down":return 2===e.button?j(t,s.open(f,t.mousePos)):Object(a.noCmd)(t);case"key-down":return"ContextMenu"===e.key?j(t,s.open(f,t.mousePos)):Object(a.noCmd)(t)}}var b=new a.DocumentEvents;function w(e){var t=e.menuModel.map((function(e){return s.subscriptions(e).map(m)})).withDefaultSupply((function(){return a.Sub.none()})),n=b.on("mousemove",(function(e){return{tag:"mouse-move",pos:s.pos(e.pageX,e.pageY)}})),u=b.on("keydown",(function(e){return{tag:"key-down",key:e.key}}));return a.Sub.batch([t,n,u])}function j(e,t){return a.Tuple.fromNative(t).mapFirst((function(t){return Object(c.a)(Object(c.a)({},e),{},{menuModel:Object(a.just)(t)})})).mapSecond((function(e){return e.map(m)})).toNative()}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.nothing;return Object(a.noCmd)(Object(c.a)(Object(c.a)({},e),{},{menuModel:a.nothing,lastClicked:t}))}var O=function(){return i.a.createElement(a.Program,{init:g,view:h,update:v,subscriptions:w,devTools:a.DevTools.init(window)})};o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(O,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.72a6112e.chunk.js.map